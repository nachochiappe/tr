{% load main_extras %}

{% if user.is_authenticated %}

    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><img src="/static/img/favicon-32x32.png"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div class="navbar-nav">
                    <a class="nav-item nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                {% if request.user|has_group:"medicos" %}
                    <a class="nav-item nav-link" href='{% url "pacientes" %}'>Todos los Pacientes</a>
                    <a class="nav-item nav-link" href='{% url "medico_pacientes" user.get_username %}'>Mis Pacientes</a>
                    <a class="nav-item nav-link" href='{% url "medico_alertas" user.get_username %}'>Mis Alertas
                        {% if object_list.medicamentos_en_falta > 0 %}
                            <span class="badge badge-danger">{{ object_list.medicamentos_en_falta }}</span>
                        {% endif %}
                    </a>
                    <a class="nav-item nav-link" href='{% url "medico_agenda" user.get_username %}'>Agenda Médica</a>
                {% elif request.user|has_group:"pacientes" %}
                    <a class="nav-item nav-link" href='{% url "paciente_detalle" user.get_username %}'>Mis Datos Personales</a>
                    <a class="nav-item nav-link" href='{% url "paciente_medicamentos" user.get_username %}'>Mis Medicaciones</a>
                    <a class="nav-item nav-link" href='{% url "paciente_estudios" user.get_username %}'>Mis Estudios</a>
                    <a class="nav-item nav-link" href='{% url "paciente_alertas" user.get_username %}'>Mis Alertas</a>
                {% else %}
                    <a class="nav-item nav-link" href='{% url "especialidad_crear" %}'>Nueva Especialidad</a>
                    <a class="nav-item nav-link" href='{% url "especialidades" %}'>Todas las Especialidades</a>
                    <a class="nav-item nav-link" href='{% url "medico_crear" %}'>Nuevo Médico</a>
                    <a class="nav-item nav-link" href='{% url "medicos" %}'>Todos los Médicos</a>
                    <a class="nav-item nav-link" href='{% url "paciente_crear" %}'>Nuevo Paciente</a>
                    <a class="nav-item nav-link" href='{% url "pacientes" %}'>Todos los Pacientes</a>
                {% endif %}
                    <a class="nav-item nav-link" href='{% url "logout" %}'><strong>Cerrar Sesión</strong></a>
                </div>
            </div>
        </div>
    </nav>

{% endif %}